{% extends "layout.html" %}

{% block title %}{{ title }} - Luxury Akran{% endblock %}

{% block content %}
<div class="container auth-form-container">
    <h2>{{ legend }}</h2>
    {% if current_image %}
    <div class="current-image-preview">
        <p>Image actuelle :</p>
        <img src="{{ current_image }}" alt="Image actuelle" style="max-width: 200px; max-height: 200px; margin-bottom: 15px;">
    </div>
    {% endif %}
    <form method="POST" enctype="multipart/form-data"> <!-- Important: enctype pour l'upload de fichiers -->
        {{ form.hidden_tag() }}
        <div class="form-group">
            {{ form.name.label(class="form-label") }}
            {{ form.name(class="form-control") }}
            {% if form.name.errors %}<div class="errors">{% for error in form.name.errors %}<span>{{ error }}</span>{% endfor %}</div>{% endif %}
        </div>
        <div class="form-group">
            {{ form.brand.label(class="form-label") }}
            {{ form.brand(class="form-control") }}
            {% if form.brand.errors %}<div class="errors">{% for error in form.brand.errors %}<span>{{ error }}</span>{% endfor %}</div>{% endif %}
        </div>
        <div class="form-group">
            {{ form.description.label(class="form-label") }}
            {{ form.description(class="form-control", rows="5") }}
            {% if form.description.errors %}<div class="errors">{% for error in form.description.errors %}<span>{{ error }}</span>{% endfor %}</div>{% endif %}
        </div>
        <div class="form-group">
            {{ form.price_info.label(class="form-label") }}
            {{ form.price_info(class="form-control") }}
            {% if form.price_info.errors %}<div class="errors">{% for error in form.price_info.errors %}<span>{{ error }}</span>{% endfor %}</div>{% endif %}
        </div>
        <div class="form-group">
            {{ form.category.label(class="form-label") }}
            {{ form.category(class="form-control") }}
            {% if form.category.errors %}<div class="errors">{% for error in form.category.errors %}<span>{{ error }}</span>{% endfor %}</div>{% endif %}
        </div>
        
        <!-- === CHAMP MANQUANT AJOUTÃ‰ ICI === -->
        <div class="form-group">
            {{ form.gender.label(class="form-label") }}
            {{ form.gender(class="form-control") }}
            {% if form.gender.errors %}<div class="errors">{% for error in form.gender.errors %}<span>{{ error }}</span>{% endfor %}</div>{% endif %}
        </div>
        <!-- ================================ -->
        
        <div class="form-group">
            {{ form.tags.label(class="form-label") }}
            {{ form.tags(class="form-control", placeholder="luxe, montre, homme") }}
            {% if form.tags.errors %}<div class="errors">{% for error in form.tags.errors %}<span>{{ error }}</span>{% endfor %}</div>{% endif %}
        </div>
        <div class="form-group">
            {{ form.image_file.label(class="form-label") }} (Laisser vide pour garder l'image actuelle lors de la modification)
            {{ form.image_file(class="form-control-file") }}
            {% if form.image_file.errors %}<div class="errors">{% for error in form.image_file.errors %}<span>{{ error }}</span>{% endfor %}</div>{% endif %}
        </div>
        <div class="form-group">
            {{ form.submit(class="btn btn-primary") }}
        </div>
    </form>
</div>
{% endblock %}